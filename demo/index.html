<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Violet Pool Card Demo</title>
    <style>
      body {
        font-family: 'Roboto', 'Noto', sans-serif;
        background-color: #f5f5f5;
        padding: 20px;
        --card-background-color: white;
        --primary-text-color: #212121;
        --secondary-text-color: #757575;
        --disabled-text-color: #bdbdbd;
        --primary-color: #03a9f4;
        --secondary-background-color: #e0f7fa;
        --error-color: #f44336;
        --ha-card-border-radius: 12px;
        --ha-card-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
          0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
      }
      .card-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
      }
      .card-wrapper {
        flex: 1 1 350px;
        min-width: 300px;
        max-width: 500px;
      }
      h2 {
        text-align: center;
        color: #333;
      }
    </style>
  </head>
  <body>
    <h2>Violet Pool Card Types</h2>
    <div class="card-container">
      <div class="card-wrapper" id="pump-card-container">
        <!-- Pump Card -->
        <violet-pool-card id="pump-card"></violet-pool-card>
      </div>
      <div class="card-wrapper" id="heater-card-container">
        <!-- Heater Card -->
        <violet-pool-card id="heater-card"></violet-pool-card>
      </div>
      <div class="card-wrapper" id="solar-card-container">
        <!-- Solar Card -->
        <violet-pool-card id="solar-card"></violet-pool-card>
      </div>
      <div class="card-wrapper" id="dosing-card-container">
        <!-- Dosing Card -->
        <violet-pool-card id="dosing-card"></violet-pool-card>
      </div>
      <div class="card-wrapper" id="overview-card-container" style="flex-basis: 100%; max-width: 100%;">
        <!-- Overview Card -->
        <violet-pool-card id="overview-card"></violet-pool-card>
      </div>
      <div class="card-wrapper" id="compact-card-container">
        <!-- Compact Card -->
        <violet-pool-card id="compact-card"></violet-pool-card>
      </div>
    </div>

    <h2>Modern Style</h2>
    <div class="card-container">
      <div class="card-wrapper">
        <violet-pool-card id="modern-pump"></violet-pool-card>
      </div>
    </div>

    <h2>Luxury Style + Flow</h2>
    <div class="card-container">
      <div class="card-wrapper">
        <violet-pool-card id="luxury-heater"></violet-pool-card>
      </div>
    </div>

    <h2>System Card</h2>
    <div class="card-container" style="max-width: 100%;">
      <div class="card-wrapper" style="flex-basis: 100%; max-width: 100%;">
        <violet-pool-card id="system-card"></violet-pool-card>
      </div>
    </div>

    <script type="module">
      import { VioletPoolCard } from '../dist/violet-pool-card.js';

      const mockHass = {
        states: {
          'switch.violet_pool_pump': {
            entity_id: 'switch.violet_pool_pump',
            state: 'on',
            attributes: {
              friendly_name: 'Pool Pump',
              PUMPSTATE: '2|OK',
              PUMP_RPM_0: 0,
              PUMP_RPM_1: 1500,
              PUMP_RPM_2: 2200,
              PUMP_RPM_3: 2800,
              runtime: 9240 // 2h 34m
            }
          },
          'climate.violet_pool_heater': {
            entity_id: 'climate.violet_pool_heater',
            state: 'heating',
            attributes: {
              friendly_name: 'Pool Heater',
              HEATERSTATE: 'OK',
              current_temperature: 24.5,
              temperature: 28.0,
              min_temp: 18,
              max_temp: 35,
              outside_temperature: 22.1,
              min_outside_temperature: 14.5
            }
          },
          'climate.violet_pool_solar': {
            entity_id: 'climate.violet_pool_solar',
            state: 'auto',
            attributes: {
              friendly_name: 'Solar Heating',
              SOLARSTATE: 'WAITING_FOR_TEMP_DIFF',
              absorber_temperature: 45.2,
              current_temperature: 24.5, // Used for pool temp comparison
              temperature: 30.0,
              min_temp: 18,
              max_temp: 32
            }
          },
          'switch.violet_pool_dos_1_cl': {
            entity_id: 'switch.violet_pool_dos_1_cl',
            state: 'on',
            attributes: {
              friendly_name: 'Chlorine Dosing',
              DOS_1_CL_STATE: ['ACTIVE'],
              dosing_volume_24h: 150
            }
          },
          'switch.violet_pool_dos_2_phm': {
            entity_id: 'switch.violet_pool_dos_2_phm',
            state: 'auto',
            attributes: {
                friendly_name: 'pH Minus',
                DOS_2_PHM_STATE: [],
                dosing_volume_24h: 50
            }
          },
          'sensor.violet_pool_orp_value': {
            entity_id: 'sensor.violet_pool_orp_value',
            state: '650',
            attributes: { unit_of_measurement: 'mV' }
          },
          'number.violet_pool_target_orp': {
            entity_id: 'number.violet_pool_target_orp',
            state: '700',
            attributes: { min: 600, max: 800 }
          },
          'sensor.violet_pool_ph_value': {
            entity_id: 'sensor.violet_pool_ph_value',
            state: '7.2',
            attributes: { unit_of_measurement: 'pH' }
          },
          'number.violet_pool_target_ph': {
            entity_id: 'number.violet_pool_target_ph',
            state: '7.2',
            attributes: { min: 6.8, max: 7.8 }
          },
          'sensor.violet_pool_temperature': {
             entity_id: 'sensor.violet_pool_temperature',
             state: '24.5',
             attributes: { unit_of_measurement: 'Â°C' }
          }
        },
        callService: async (domain, service, data) => {
          console.log(`Called service ${domain}.${service}`, data);
        }
      };

      // Configure cards
      const pumpCard = document.getElementById('pump-card');
      pumpCard.setConfig({
        type: 'custom:violet-pool-card',
        entity: 'switch.violet_pool_pump',
        card_type: 'pump',
        show_runtime: true
      });
      pumpCard.hass = mockHass;

      const heaterCard = document.getElementById('heater-card');
      heaterCard.setConfig({
        type: 'custom:violet-pool-card',
        entity: 'climate.violet_pool_heater',
        card_type: 'heater'
      });
      heaterCard.hass = mockHass;

      const solarCard = document.getElementById('solar-card');
      solarCard.setConfig({
        type: 'custom:violet-pool-card',
        entity: 'climate.violet_pool_solar',
        card_type: 'solar'
      });
      solarCard.hass = mockHass;

      const dosingCard = document.getElementById('dosing-card');
      dosingCard.setConfig({
        type: 'custom:violet-pool-card',
        entity: 'switch.violet_pool_dos_1_cl',
        card_type: 'dosing',
        dosing_type: 'chlorine',
        show_history: true
      });
      dosingCard.hass = mockHass;

      const overviewCard = document.getElementById('overview-card');
      overviewCard.setConfig({
        type: 'custom:violet-pool-card',
        card_type: 'overview'
      });
      overviewCard.hass = mockHass;

      const compactCard = document.getElementById('compact-card');
      compactCard.setConfig({
        type: 'custom:violet-pool-card',
        entity: 'switch.violet_pool_pump',
        card_type: 'compact'
      });
      compactCard.hass = mockHass;

      // Modern Pump
      const modernPump = document.getElementById('modern-pump');
      modernPump.setConfig({
        type: 'custom:violet-pool-card',
        entity: 'switch.violet_pool_pump',
        card_type: 'pump',
        style: 'modern'
      });
      modernPump.hass = mockHass;

      // Luxury Heater
      const luxuryHeater = document.getElementById('luxury-heater');
      luxuryHeater.setConfig({
        type: 'custom:violet-pool-card',
        entity: 'climate.violet_pool_heater',
        card_type: 'heater',
        style: 'luxury',
        show_flow_animation: true
      });
      luxuryHeater.hass = mockHass;

      // System Card
      const systemCard = document.getElementById('system-card');
      systemCard.setConfig({
        type: 'custom:violet-pool-card',
        card_type: 'system',
        style: 'luxury',
        show_flow_animation: true
      });
      systemCard.hass = mockHass;

    </script>
  </body>
</html>
